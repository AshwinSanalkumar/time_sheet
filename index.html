<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .glass { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
    </style>
</head>
<body class="bg-slate-100 min-h-screen flex items-center justify-center p-4">

    <div class="glass max-w-md w-full rounded-3xl shadow-2xl p-8 border border-white">
        <h1 class="text-2xl font-bold text-slate-800 text-center mb-6">Office Timer</h1>
        
        <div class="flex justify-center mb-6">
            <span id="statusBadge" class="px-4 py-1 rounded-full text-sm font-bold bg-slate-200 text-slate-600 uppercase tracking-widest">
                Clocked Out
            </span>
        </div>

        <div class="grid grid-cols-2 gap-4 mb-8">
            <div class="bg-blue-50 p-4 rounded-2xl text-center">
                <p class="text-xs text-blue-600 font-bold uppercase">Work Time</p>
                <p id="workClock" class="text-2xl font-mono font-bold text-blue-900">00:00:00</p>
            </div>
            <div class="bg-orange-50 p-4 rounded-2xl text-center">
                <p class="text-xs text-orange-600 font-bold uppercase">Break Time</p>
                <p id="breakClock" class="text-2xl font-mono font-bold text-orange-900">00:00:00</p>
            </div>
        </div>

        <div class="mb-8">
            <div class="flex justify-between text-xs font-bold mb-2">
                <span class="text-slate-500">PROGRESS ls
                    
                </span>
                <span id="progressPercent" class="text-blue-600">0%</span>
            </div>
            <div class="w-full bg-slate-200 rounded-full h-3">
                <div id="progressBar" class="bg-blue-600 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
            </div>
            <p id="remainingTime" class="text-center text-sm text-slate-500 mt-3 font-medium"></p>
        </div>

        <div id="controls" class="space-y-3">
            <button id="btnMain" onclick="handleMainAction()" class="w-full py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-2xl font-bold shadow-lg transition-all active:scale-95">
                Time In
            </button>
            <button id="btnBreak" onclick="handleBreakAction()" class="hidden w-full py-4 bg-white border-2 border-orange-400 text-orange-600 hover:bg-orange-50 rounded-2xl font-bold transition-all active:scale-95">
                Take Break
            </button>
            <button id="btnReset" onclick="resetDay()" class="w-full py-2 text-slate-400 text-xs hover:text-red-500 transition-colors mt-4">
                Reset Day
            </button>
        </div>
    </div>

    <script>
        let state = JSON.parse(localStorage.getItem('timerState')) || {
            status: 'OUT', // OUT, WORKING, BREAK
            totalWorkMs: 0,
            totalBreakMs: 0,
            lastTimestamp: null
        };

        const TARGET_MS = 8 * 60 * 60 * 1000;

        function save() {
            localStorage.setItem('timerState', JSON.stringify(state));
        }

        function formatTime(ms) {
            let s = Math.floor(ms / 1000);
            let m = Math.floor(s / 60);
            let h = Math.floor(m / 60);
            return [h, m % 60, s % 60].map(v => v.toString().padStart(2, '0')).join(':');
        }

        function updateUI() {
            const now = Date.now();
            let liveWork = state.totalWorkMs;
            let liveBreak = state.totalBreakMs;

            if (state.status === 'WORKING') {
                liveWork += (now - state.lastTimestamp);
            } else if (state.status === 'BREAK') {
                liveBreak += (now - state.lastTimestamp);
            }

            document.getElementById('workClock').innerText = formatTime(liveWork);
            document.getElementById('breakClock').innerText = formatTime(liveBreak);
            
            const progress = Math.min(100, (liveWork / TARGET_MS) * 100);
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressPercent').innerText = Math.floor(progress) + '%';
            
            const remaining = Math.max(0, TARGET_MS - liveWork);
            document.getElementById('remainingTime').innerText = remaining > 0 ? 
                `Left to work: ${formatTime(remaining)}` : "Goal Reached! ðŸŽ‰";

            const badge = document.getElementById('statusBadge');
            const btnMain = document.getElementById('btnMain');
            const btnBreak = document.getElementById('btnBreak');

            if (state.status === 'WORKING') {
                badge.innerText = "Working";
                badge.className = "px-4 py-1 rounded-full text-sm font-bold bg-green-100 text-green-600 uppercase tracking-widest";
                btnMain.innerText = "Time Out";
                btnMain.className = "w-full py-4 bg-red-500 hover:bg-red-600 text-white rounded-2xl font-bold shadow-lg";
                btnBreak.classList.remove('hidden');
                btnBreak.innerText = "Take Break";
            } else if (state.status === 'BREAK') {
                badge.innerText = "On Break";
                badge.className = "px-4 py-1 rounded-full text-sm font-bold bg-orange-100 text-orange-600 uppercase tracking-widest";
                btnMain.classList.add('hidden');
                btnBreak.classList.remove('hidden');
                btnBreak.innerText = "Resume Work";
                btnBreak.className = "w-full py-4 bg-blue-600 text-white rounded-2xl font-bold";
            } else {
                badge.innerText = "Clocked Out";
                btnMain.classList.remove('hidden');
                btnMain.innerText = "Time In";
                btnMain.className = "w-full py-4 bg-blue-600 text-white rounded-2xl font-bold";
                btnBreak.classList.add('hidden');
            }
        }

        function handleMainAction() {
            const now = Date.now();
            if (state.status === 'OUT') {
                state.status = 'WORKING';
                state.lastTimestamp = now;
            } else if (state.status === 'WORKING') {
                state.totalWorkMs += (now - state.lastTimestamp);
                state.status = 'OUT';
                state.lastTimestamp = null;
            }
            save();
            updateUI();
        }

        function handleBreakAction() {
            const now = Date.now();
            if (state.status === 'WORKING') {
                state.totalWorkMs += (now - state.lastTimestamp);
                state.status = 'BREAK';
                state.lastTimestamp = now;
            } else if (state.status === 'BREAK') {
                state.totalBreakMs += (now - state.lastTimestamp);
                state.status = 'WORKING';
                state.lastTimestamp = now;
            }
            save();
            updateUI();
        }

        function resetDay() {
            if(confirm("Reset everything for today?")) {
                state = { status: 'OUT', totalWorkMs: 0, totalBreakMs: 0, lastTimestamp: null };
                save();
                updateUI();
            }
        }

        setInterval(updateUI, 1000);
        updateUI();
    </script>
</body>
</html>